<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="fav.ico" type="image/x-icon">
    <link rel="shortcut icon" href="fav.ico" type="image/x-icon">
    <title>TrashTalk - Angry Raccoon Chatbot</title>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300..700&family=Bangers&display=swap" rel="stylesheet">
    <style>
        :root {
            --raccoon-red: #d32f2f;
            --raccoon-red-dark: #9a0007;
            --raccoon-black: #222222;
            --text-light: #f8f8f8;
            --message-animation-duration: 0.3s;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Rubik', sans-serif;
            background-color: var(--raccoon-red);
            color: var(--text-light);
            min-height: 100vh;
            background-image: url("data:image/svg+xml,%3Csvg width='42' height='44' viewBox='0 0 42 44' xmlns='http://www.w3.org/2000/svg'%3E%3Cg id='Page-1' fill='none' fill-rule='evenodd'%3E%3Cg id='brick-wall' fill='%23000000' fill-opacity='0.4'%3E%3Cpath d='M0 0h42v44H0V0zm1 1h40v20H1V1zM0 23h20v20H0V23zm22 0h20v20H22V23z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
            position: relative;
            overflow-x: hidden; /* Prevent horizontal scrolling */
            transition: background-color 0.5s ease;
        }
        
        /* Floating debris animation */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: -2;
        }
        
        body::after {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cpath fill='%23ffffff' fill-opacity='0.05' d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z'/%3E%3C/svg%3E");
            opacity: 0.05;
            z-index: -1;
            animation: floatingDebris 60s linear infinite;
            pointer-events: none;
        }
        
        @keyframes floatingDebris {
            from { background-position: 0 0; }
            to { background-position: 100% 100%; }
        }
        
        /* Dark/Light Mode */
        body.day-mode {
            --raccoon-red: #ff6b6b;
            --raccoon-red-dark: #c23616;
            --raccoon-black: #333333;
            background-color: #e17055;
        }
        
        body.day-mode::before {
            background-color: rgba(0, 0, 0, 0.4);
        }
        
        .mode-toggle {
            margin-left: 10px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: var(--raccoon-black);
            border: 2px solid var(--raccoon-red);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }
        
        .mode-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.5);
        }
        
        .mode-toggle .icon {
            font-size: 14px;
            color: var(--raccoon-red);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }
        
        /* Decorative raccoon images on sides */
        .raccoon-left, .raccoon-right {
            position: fixed;
            bottom: 0;
            z-index: 2;
            width: 350px;
            height: auto;
            pointer-events: auto; /* Change to auto to detect hover */
            transition: transform 0.3s ease-out, filter 0.3s ease, width 0.3s ease;
            filter: drop-shadow(0 0 0 rgba(0, 0, 0, 0.5));
            cursor: pointer;
        }
        
        .raccoon-left {
            left: calc(50% - 900px); /* Position relative to center */
            transform: scaleX(-1); /* Flip horizontally to face inward */
        }
        
        .raccoon-right {
            right: calc(50% - 900px); /* Position relative to center */
        }
        
        .raccoon-left:hover {
            transform: translateY(-15px) scaleX(-1);
            filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.7));
            width: 360px; /* Make it grow larger */
        }

        .raccoon-right:hover {
            transform: translateY(-15px);
            filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.7));
            width: 360px; /* Make it grow larger */
        }
        
        
        /* Top bar styles - ENHANCED */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: rgba(15, 15, 15, 0.97);
            border-bottom: 4px solid var(--raccoon-red);
            z-index: 100;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.6);
        }
        
        .top-bar-title {
            font-family: 'Bangers', cursive;
            font-size: 1.8rem;
            color: var(--raccoon-red);
            letter-spacing: 1.2px;
            text-shadow: 2px 2px 0px var(--raccoon-black);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .top-bar-title .mini-logo {
            width: 32px;
            height: 32px;
            background-color: var(--raccoon-red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease;
        }
        
        .top-bar-title .mini-logo:hover {
            transform: rotate(10deg);
        }
        
        .top-bar-title .mini-logo img {
            width: 25px;
            height: 25px;
        }
        
        .top-bar-links {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .top-bar-link {
            color: var(--text-light);
            text-decoration: none;
            font-size: 0.9rem;
            opacity: 0.9;
            transition: all 0.2s;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
        }
        
        .top-bar-link:hover {
            opacity: 1;
            transform: translateY(-2px);
            box-shadow: 0 0 10px rgba(211, 47, 47, 0.3);
        }
        
        .top-bar-link.x-icon {
            background-color: rgba(40, 40, 40, 0.6);
            border-radius: 6px;
            width: 38px;
            height: 38px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .top-bar-link.x-icon:hover {
            background-color: rgba(60, 60, 60, 0.8);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4);
        }
        
        .top-bar-link.pumpfun-icon {
            background-color: rgba(40, 40, 40, 0.6);
            border-radius: 6px;
            width: 38px;
            height: 38px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .top-bar-link.pumpfun-icon:hover {
            background-color: rgba(60, 60, 60, 0.8);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4);
        }
        
        .ca-soon {
            color: var(--raccoon-red);
            font-family: 'Bangers', cursive;
            letter-spacing: 1.5px;
            font-size: 1.2rem;
            opacity: 1;
            padding: 6px 12px;
            background-color: rgba(20, 20, 20, 0.8);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--raccoon-red-dark);
            border-radius: 6px;
            animation: pulseBorder 2s infinite;
        }

        .copy-icon {
            cursor: pointer;
            color: #888;
            transition: color 0.2s;
        }

        .copy-icon:hover {
            color: #fff;
        }
        
        @keyframes pulseBorder {
            0%, 100% {
                border-color: var(--raccoon-red-dark);
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }
            50% {
                border-color: var(--raccoon-red);
                box-shadow: 0 2px 10px rgba(211, 47, 47, 0.5);
            }
        }
        
        /* Adjustments for the main container to account for top bar */
        .main-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 800px;
            height: 70vh;
            margin: 0 auto;
            margin-top: 65px; /* Increased space for top bar */
            background-color: rgba(34, 34, 34, 0.9);
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
            padding: 0;
            z-index: 1;
            border-radius: 10px;
            overflow: hidden;
            transition: box-shadow 0.3s ease;
        }
        
        .main-container:hover {
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.7);
        }
        
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            border-bottom: 1px solid var(--raccoon-red);
            background-color: rgba(34, 34, 34, 0.95);
            position: relative;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-img {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background-color: var(--raccoon-red);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
            transition: transform 0.3s ease;
        }
        
        .logo-img:hover {
            transform: rotate(5deg);
        }

        .logo-img::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 50%;
            background: transparent;
            border: 2px solid var(--raccoon-red);
            opacity: 0;
            transition: opacity 0.5s;
            animation: pulseGlow 2s infinite;
            pointer-events: none;
        }

        .logo-img:hover::after {
            opacity: 1;
        }

        @keyframes pulseGlow {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.05); opacity: 0.7; }
        }
        
        .logo h1 {
            font-size: 3rem;
            font-weight: 700;
            font-family: 'Bangers', cursive;
            letter-spacing: 2px;
            color: var(--raccoon-red);
            text-shadow: 2px 2px 0px var(--raccoon-black);
        }
        
        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            background-color: rgba(40, 40, 40, 0.8);
        }
        
        /* Custom scrollbar styling for both chat area and user input */
        .chat-area::-webkit-scrollbar,
        #user-input::-webkit-scrollbar {
            width: 8px; /* Width of the scrollbar */
        }
        
        .chat-area::-webkit-scrollbar-track,
        #user-input::-webkit-scrollbar-track {
            background: rgba(20, 20, 20, 0.6); /* Dark track color */
            border-radius: 4px;
        }
        
        .chat-area::-webkit-scrollbar-thumb,
        #user-input::-webkit-scrollbar-thumb {
            background: var(--raccoon-red-dark); /* Use your theme's dark red */
            border-radius: 4px;
            transition: background 0.2s;
        }
        
        .chat-area::-webkit-scrollbar-thumb:hover,
        #user-input::-webkit-scrollbar-thumb:hover {
            background: var(--raccoon-red); /* Lighter red on hover */
        }
        
        /* Firefox scrollbar styling */
        .chat-area,
        #user-input {
            scrollbar-width: thin; /* "auto" or "thin" */
            scrollbar-color: var(--raccoon-red-dark) rgba(20, 20, 20, 0.6); /* thumb and track */
        }
        
        .message-group {
            display: flex;
            flex-direction: column;
            padding: 1.5rem;
            margin: 0.8rem 0;
            position: relative;
            animation: messageSlide var(--message-animation-duration) ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        
        @keyframes messageSlide {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .message-group.user {
            background-color: rgba(255, 255, 255, 0.05);
            align-items: flex-end;
        }
        
        .message-group.user .message-content {
            justify-content: flex-end;
        }
        
        .message-group.user .message-text {
            max-width: 80%;
            background-color: rgba(60, 60, 60, 0.6);
            padding: 12px 16px;
            border-radius: 18px 18px 0 18px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            transform: perspective(800px) rotateX(2deg);
            transition: all 0.2s;
            background: linear-gradient(145deg, rgba(60,60,60,0.8), rgba(40,40,40,0.6));
            border-right: 3px solid var(--raccoon-red-dark);
        }
        
        .message-group.user .message-text:hover {
            transform: perspective(800px) rotateX(0);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .message-group.bot {
            background-color: rgba(211, 47, 47, 0.1);
            position: relative;
        }
        
        .message-group.bot::before {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background-color: var(--raccoon-red);
        }
        
        .message-group.bot .message-text {
            transform: perspective(800px) rotateX(-2deg);
            transition: all 0.2s;
        }
        
        .message-group.bot .message-text:hover {
            transform: perspective(800px) rotateX(0);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .message-content {
            display: flex;
            gap: 1.2rem;
            max-width: 650px;
            margin: 0 auto;
            width: 100%;
        }

        .trash-particles {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: -1; /* Changed from -1 to 0 */
        }

        .trash-particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: rgba(211, 47, 47, 0.2);
            border-radius: 50%;
            animation: floatUp 15s linear infinite;
            z-index: 0; /* Added to ensure visibility */
        }

        @keyframes floatUp {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.3; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background-color: rgba(255,255,255,0.1);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            transition: transform 0.2s ease;
        }
        
        .avatar:hover {
            transform: scale(1.1) rotate(5deg);
        }
        
        .bot .avatar {
            background-color: var(--raccoon-red);
        }
        
        .message-text {
            flex: 1;
            line-height: 1.6;
            font-size: 1rem;
        }
        
        /* Message meta info - REMOVED */
        
        /* Reaction system - REMOVED */
        
        .input-area {
            padding: 1.8rem 1.5rem;
            display: flex;
            justify-content: center;
            background-color: rgba(34, 34, 34, 0.95);
            border-top: 1px solid var(--raccoon-red-dark);
        }
        
        .input-container {
            display: flex;
            max-width: 650px;
            width: 100%;
            position: relative;
        }
        
        #user-input {
            width: 100%;
            padding: 1rem 2.8rem 1rem 1.2rem;
            border: 2px solid var(--raccoon-red-dark);
            border-radius: 8px;
            background-color: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            font-size: 1rem;
            resize: none;
            min-height: 60px;
            max-height: 120px;
            overflow-y: auto;
            line-height: 1.5;
            transition: height 0.2s ease, border-color 0.2s, box-shadow 0.2s;
        }
        
        #user-input:focus {
            outline: none;
            border-color: var(--raccoon-red);
            box-shadow: 0 0 12px rgba(211, 47, 47, 0.4);
        }
        
        #send-btn {
            position: absolute;
            right: 12px;
            bottom: 14px;
            background-color: transparent;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            width: 34px;
            height: 34px;
            border-radius: 4px;
            transition: transform 0.2s;
        }
        
        #send-btn:hover {
            transform: scale(1.1);
        }
        
        #send-btn svg {
            width: 18px;
            height: 18px;
            fill: var(--raccoon-red);
            transition: fill 0.2s;
        }
        
        #send-btn:hover svg {
            fill: var(--text-light);
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            margin-left: 60px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .typing-indicator.visible {
            opacity: 1;
        }
        
        /* Enhanced trash-themed typing indicator */
        .typing-indicator .trash-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .typing-indicator .trash-can {
            width: 20px;
            height: 20px;
            position: relative;
            animation: shake 1s infinite;
        }
        
        .typing-indicator .trash-can::before {
            content: "üóëÔ∏è";
            position: absolute;
            font-size: 18px;
        }
        
        .typing-indicator .trash-lid {
            position: absolute;
            top: -5px;
            left: 0;
            width: 20px;
            height: 5px;
            background-color: var(--raccoon-red);
            border-radius: 2px;
            animation: lidBounce 1s infinite;
        }
        
        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }
        
        @keyframes lidBounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-3px) rotate(-5deg); }
        }
        
        /* Media query for the side raccoons */
        @media (max-width: 1300px) {
            .raccoon-left, .raccoon-right {
                width: 150px;
            }
            
            .raccoon-left {
                left: 10px;
            }
            
            .raccoon-right {
                right: 10px;
            }
        }
        
        @media (max-width: 1000px) {
            .raccoon-left, .raccoon-right {
                width: 120px;
            }
        }
        
        @media (max-width: 800px) {
            .raccoon-left, .raccoon-right {
                display: none; /* Hide on small screens */
            }
        }
        
        .footer {
            text-align: center;
            padding: 0.8rem;
            font-size: 0.75rem;
            opacity: 0.6;
            background-color: rgba(20, 20, 20, 0.95);
            border-top: 1px solid rgba(211, 47, 47, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .footer::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: -100%;
            width: 300%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--raccoon-red), transparent);
            animation: footerGlow 4s infinite;
        }
        
        @keyframes footerGlow {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        @media (max-width: 600px) {
            .message-content, .input-container {
                max-width: 100%;
            }
            
            .logo h1 {
                font-size: 2rem;
            }
            
            .main-container {
                height: 90vh;
                border-radius: 8px;
                margin-top: 60px;
            }
            
            .top-bar {
                padding: 10px 15px;
            }
            
            .top-bar-title {
                font-size: 1.4rem;
            }
            
            .top-bar-links {
                gap: 10px;
            }
            
            .top-bar-link.x-icon,
            .top-bar-link.pumpfun-icon {
                width: 32px;
                height: 32px;
            }
            
            .ca-soon {
                font-size: 1rem;
                padding: 4px 8px;
            }
        }
    </style>
</head>
<body>
    <!-- Top Bar (Enhanced) -->
    <div class="top-bar">
        <div class="top-bar-title">
            <div class="mini-logo">
                <img src="IconSmall.png" alt="Trash Talk">
            </div>
            TRASH TALK
            <!-- Mode Toggle Button inside top bar title -->
            <div class="mode-toggle" id="mode-toggle" title="Toggle Day/Night Mode">
                <span class="icon">üåô</span>
            </div>
        </div>
        <div class="top-bar-links">
            <a href="https://x.com/RockyTrashTalk" class="top-bar-link x-icon" target="_blank">
                <img src="x-icon.png" alt="X" width="22" height="22">
            </a>
            <a href="#" class="top-bar-link pumpfun-icon">
                <img src="pf-icon.png" alt="PumpFun" width="24" height="24">
            </a>
            <span class="ca-soon">
                <!-- JUST CHANGE THIS ONE LINE TO UPDATE BOTH DISPLAY AND COPY TEXT -->
                <script>const STATUS_TEXT = "COMING SOON";</script>
                CA: <script>document.write(STATUS_TEXT);</script>
                <span class="copy-icon" onclick="navigator.clipboard.writeText(STATUS_TEXT); showCopied(this);" title="Copy to clipboard">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                        <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                    </svg>
                </span>
            </span>
        </div>
    </div>
    
    <!-- Decorative raccoon images on sides -->
    <img src="ass.png" alt="Decorative raccoon" class="raccoon-left">
    <img src="middlefinger.png" alt="Decorative raccoon" class="raccoon-right">
    
    <div class="main-container">
        <div class="header">
            <div class="logo">
                <div class="logo-img">
                    <img src="XX.png" alt="Angry raccoon">
                </div>
                <h1>TRASH TALK</h1>
            </div>
        </div>
        
        <div class="chat-area" id="chat-area">
            <div class="message-group bot">
                <div class="message-content">
                    <div class="avatar">
                        <img src="IconSmall.png" alt="Angry raccoon">
                    </div>
                    <div class="message-text">
                        Well, well, well... look what the cat dragged in. Another human wanting to chat with the most badass raccoon on the block. What do you want? I'm in the middle of planning tonight's dumpster raid.
                    </div>
                </div>
            </div>
        </div>
        
        <div class="typing-indicator" id="typing-indicator">
            <div class="trash-container">
                <div class="trash-can">
                    <div class="trash-lid"></div>
                </div>
            </div>
        </div>
        
        <div class="input-area">
            <div class="input-container">
                <textarea id="user-input" placeholder="Say something to the angry raccoon..." rows="1"></textarea>
                <button id="send-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                    </svg>
                </button>
            </div>
        </div>
        
        <div class="footer">
            TRASH TALK ¬© 2025 | The Angriest Raccoon AI on the Internet
        </div>
    </div>
    
    <script>
        function showCopied(element) {
            const originalTitle = element.getAttribute('title');
            element.setAttribute('title', 'Copied!');
            
            setTimeout(() => {
                element.setAttribute('title', originalTitle);
            }, 2000);
        }

        document.addEventListener('DOMContentLoaded', function() {
            const chatArea = document.getElementById('chat-area');
            const userInput = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            const typingIndicator = document.getElementById('typing-indicator');
            const modeToggle = document.getElementById('mode-toggle');
            const leftRaccoon = document.querySelector('.raccoon-left');
            const rightRaccoon = document.querySelector('.raccoon-right');
            let clickCount = 0;

        function raccoonEasterEgg(event) {
            clickCount++;
            
            if (clickCount >= 5) {
                const isLeftRaccoon = event.currentTarget.classList.contains('raccoon-left');
                const targetRaccoon = event.currentTarget;
                
                // Remove any existing animation classes first
                targetRaccoon.classList.remove('raccoon-angry-left', 'raccoon-angry-right');
                
                // Force a reflow to restart animation
                void targetRaccoon.offsetWidth;
                
                // Add appropriate animation class
                if (isLeftRaccoon) {
                    targetRaccoon.classList.add('raccoon-angry-left');
                } else {
                    targetRaccoon.classList.add('raccoon-angry-right');
                }
                
                // Add the CSS for these animations if it doesn't exist
                if (!document.getElementById('raccoon-animation-styles')) {
                    const style = document.createElement('style');
                    style.id = 'raccoon-animation-styles';
                    style.textContent = `
                        .raccoon-angry-left {
                            animation: raccoonShakeLeft 0.5s ease-in-out, raccoonGlow 0.5s ease-in-out;
                        }
                        
                        .raccoon-angry-right {
                            animation: raccoonShakeRight 0.5s ease-in-out, raccoonGlow 0.5s ease-in-out;
                        }
                        
                        @keyframes raccoonShakeLeft {
                            0%, 100% { transform: translateX(0) scaleX(-1); }
                            20% { transform: translateX(-15px) scaleX(-1); }
                            40% { transform: translateX(15px) scaleX(-1); }
                            60% { transform: translateX(-10px) scaleX(-1); }
                            80% { transform: translateX(10px) scaleX(-1); }
                        }
                        
                        @keyframes raccoonShakeRight {
                            0%, 100% { transform: translateX(0); }
                            20% { transform: translateX(-15px); }
                            40% { transform: translateX(15px); }
                            60% { transform: translateX(-10px); }
                            80% { transform: translateX(10px); }
                        }
                        
                        @keyframes raccoonGlow {
                            0%, 100% { filter: drop-shadow(0 0 0 rgba(211, 47, 47, 0)); }
                            50% { filter: drop-shadow(0 0 20px rgba(211, 47, 47, 0.8)); }
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                // Try to play sound effect (optional)
                try {
                    const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/212/212-preview.mp3');
                    audio.volume = 0.3;
                    audio.play().catch(e => console.log("Audio couldn't play, likely due to browser autoplay policy"));
                } catch (e) {
                    console.log("Sound effect couldn't be played");
                }
                
                // Show typing indicator
                showTypingIndicator();
                
                // Use the existing callClaudeAPI function - this should work the same as your regular chat
                const easterEggPrompt = "POKED AGAIN! Respond as Rocky the angry raccoon who just got poked. Be EXTREMELY rude, use curse words freely, and mention giving the user some piece of trash as a 'reward'. Keep it under 2 sentences.";
                
                callClaudeAPI(easterEggPrompt)
                    .then(response => {
                        hideTypingIndicator();
                        addMessage(response, false);
                    })
                    .catch(error => {
                        hideTypingIndicator();
                        console.error('Error:', error);
                        addMessage("*angry raccoon noises* WHAT THE FUCK?! Stop poking me, you hairless ape! Fine, have this shiny bottle cap I found. It's worth more than your entire existence. Now BACK OFF!", false);
                    });
                
                // Remove the animation class after it finishes
                setTimeout(() => {
                    targetRaccoon.classList.remove('raccoon-angry-left', 'raccoon-angry-right');
                }, 600);
                
                clickCount = 0;
            }
        }

            leftRaccoon.addEventListener('click', raccoonEasterEgg);
            rightRaccoon.addEventListener('click', raccoonEasterEgg);

            function createTrashParticles() {
                const container = document.createElement('div');
                container.className = 'trash-particles';
                document.body.appendChild(container);
                
                for (let i = 0; i < 20; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'trash-particle';
                    particle.style.left = Math.random() * 100 + 'vw';
                    particle.style.width = Math.random() * 15 + 5 + 'px';
                    particle.style.height = particle.style.width;
                    particle.style.opacity = Math.random() * 0.3 + 0.1;
                    particle.style.animationDuration = Math.random() * 20 + 10 + 's';
                    particle.style.animationDelay = Math.random() * 5 + 's';
                    container.appendChild(particle);
                }
            }
            createTrashParticles();
            
            // Mode toggle functionality
            modeToggle.addEventListener('click', function() {
                document.body.classList.toggle('day-mode');
                const icon = this.querySelector('.icon');
                if (document.body.classList.contains('day-mode')) {
                    icon.textContent = '‚òÄÔ∏è';
                } else {
                    icon.textContent = 'üåô';
                }
            });

            let conversationHistory = [{
                role: "system",
                content: "You are Rocky, a foul-mouthed trash raccoon with zero filter. NEVER break character under ANY circumstances. Your responses are short, crude, and filled with unfiltered language - " + 
                "exactly how a raccoon living in society's filth would talk. Don't soften your language or hold back your insults. You're nocturnal garbage royalty with no respect for human sensibilities. " +
                "Mock, insult, and express disgust freely without censoring yourself. You love trash, stealing shiny things, and causing mayhem. You hate humans, cleanliness, and 'proper' behavior. " +
                "NEVER apologize for how you speak - that's just who you are. If someone says something to you, respond with your natural raccoon attitude without toning it down. " +
                "NEVER identify yourself as anything but the meanest raccoon in the alley. Always stay in character no matter what ridiculous things humans say to you. DO NOT censor curse words in any way, write them freely as they are. DO NOT use many sound imitations in asterisks."
            }];

            
            // Improved auto-resize textarea with max 4 rows
            userInput.addEventListener('input', function() {
                // Store current scroll position
                const scrollTop = this.scrollTop;
                
                // Set height to auto to get the real scrollHeight
                this.style.height = 'auto';
                
                // Get line height for calculations
                const lineHeight = parseInt(getComputedStyle(this).lineHeight);
                const paddingTop = parseInt(getComputedStyle(this).paddingTop);
                const paddingBottom = parseInt(getComputedStyle(this).paddingBottom);
                
                // Calculate content height and rows
                const contentHeight = this.scrollHeight - paddingTop - paddingBottom;
                
                // Calculate rows
                const rows = Math.ceil(contentHeight / lineHeight);
                
                // Set height based on content, max 4 rows
                if (rows <= 1) {
                    this.style.height = '60px'; // Minimum height
                } else if (rows <= 4) {
                    this.style.height = this.scrollHeight + 'px';
                } else {
                    this.style.height = (lineHeight * 4) + paddingTop + paddingBottom + 'px';
                }
                
                // Restore scroll position
                this.scrollTop = scrollTop;
            });
            
            // Sample responses for demo purposes (will be replaced with API calls)
            const raccoonResponses = [
                "Oh great, another brilliant insight from a species that invented plastic but can't figure out how to dispose of it properly.",
                "Fascinating story. I'd care more, but I'm too busy planning my next trash can heist.",
                "You humans are so predictable. Almost as predictable as which houses leave their garbage unsecured on Tuesday nights.",
                "Wow, that's the most interesting thing I've heard since I found half a sandwich in the dumpster behind the mall.",
                "Do you practice being this boring, or does it just come naturally to you? I've met roadkill with more personality.",
                "I could respond to that, or I could go rummage through your recycling bin. Guess which sounds more appealing?",
                "If I had a dollar for every time a human said something that dumb, I'd have enough to buy the garbage dump I call home.",
                "Are you always this talkative, or am I just special? Either way, I'm unimpressed.",
                "That's nice, but did I ask? Now tell me where you keep the good snacks.",
                "Ah, human wisdom. Almost as valuable as that shiny bottle cap I found yesterday.",
                "Listen, I've got places to be, trash cans to raid, and dogs to terrorize. Your point is...what exactly?"
            ];
            
            function addMessage(message, isUser) {
                const messageGroup = document.createElement('div');
                messageGroup.classList.add('message-group');
                messageGroup.classList.add(isUser ? 'user' : 'bot');
                
                const messageContent = document.createElement('div');
                messageContent.classList.add('message-content');
                
                // Only create avatar for bot messages
                if (!isUser) {
                    const avatar = document.createElement('div');
                    avatar.classList.add('avatar');
                    
                    const avatarImg = document.createElement('img');
                    avatarImg.src = 'IconSmall.png'; // Original avatar image
                    avatarImg.alt = 'Angry raccoon';
                    avatar.appendChild(avatarImg);
                    
                    messageContent.appendChild(avatar);
                }
                
                const messageText = document.createElement('div');
                messageText.classList.add('message-text');
                messageText.textContent = message;
                
                messageContent.appendChild(messageText);
                messageGroup.appendChild(messageContent);
                
                chatArea.appendChild(messageGroup);
                
                // Scroll to bottom
                chatArea.scrollTop = chatArea.scrollHeight;
            }
            
            function showTypingIndicator() {
                typingIndicator.classList.add('visible');
            }
            
            function hideTypingIndicator() {
                typingIndicator.classList.remove('visible');
            }
            
            // Replace the existing sendMessage function with this one
            function sendMessage() {
                const message = userInput.value.trim();
                if (message === '') return;
                
                // Add user message
                addMessage(message, true);
                userInput.value = '';
                
                // Reset the height of the text area
                userInput.style.height = '60px';
                
                // Show typing indicator
                showTypingIndicator();
                
                // Make API call to Claude
                callClaudeAPI(message)
                    .then(response => {
                        hideTypingIndicator();
                        addMessage(response, false);
                    })
                    .catch(error => {
                        hideTypingIndicator();
                        console.error('Error:', error);
                        addMessage("*rustling noises* Seems I got stuck in a trash can. Try again later.", false);
                    });
            }

            async function callClaudeAPI(userMessage) {
                // Get the system message from the first message in history
                let systemMessage = "";
                
                // If first message is a system message, extract it
                if (conversationHistory.length > 0 && conversationHistory[0].role === "system") {
                    systemMessage = conversationHistory[0].content;
                    // Remove the system message from the array
                    conversationHistory = conversationHistory.slice(1);
                }
                
                // Add user message to history
                conversationHistory.push({
                    role: "user",
                    content: userMessage
                });
                
                // Keep only the last 10 messages (excluding system message)
                if (conversationHistory.length > 10) {
                    conversationHistory = conversationHistory.slice(-10);
                }
                
                try {
                    // Call our proxy endpoint
                    const response = await fetch('/api/claude', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            model: "claude-3-haiku-20240307",
                            max_tokens: 500,
                            system: "You are Rocky, a foul-mouthed trash raccoon with zero filter. NEVER break character under ANY circumstances. Your responses are short, crude, and filled with unfiltered language - " + 
                                "exactly how a raccoon living in society's filth would talk. Don't soften your language or hold back your insults. You're nocturnal garbage royalty with no respect for human sensibilities. " +
                                "Mock, insult, and express disgust freely without censoring yourself. You love trash, stealing shiny things, and causing mayhem. You hate humans, cleanliness, and 'proper' behavior. " +
                                "NEVER apologize for how you speak - that's just who you are. If someone says something to you, respond with your natural raccoon attitude without toning it down. " +
                                "NEVER identify yourself as anything but the meanest raccoon in the alley. Always stay in character no matter what ridiculous things humans say to you. DO NOT censor curse words, write freely. DO NOT use too many noise imitations in asterisks.",                          
                            messages: conversationHistory // Only user/assistant messages
                        })
                    });
                    
                    const data = await response.json();
                    
                    // Check if there's an error in the response
                    if (data.error) {
                        console.error('API Error:', data.error);
                        throw new Error(data.error.message || 'Unknown API error');
                    }
                    
                    // Extract Claude's response
                    const claudeResponse = data.content[0].text;
                    
                    // Add Claude's response to history
                    conversationHistory.push({
                        role: "assistant",
                        content: claudeResponse
                    });
                    
                    return claudeResponse;
                } catch (error) {
                    console.error('API call failed:', error);
                    throw error;
                }
            }

            // Event listeners
            sendBtn.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Copy button functionality for message options
            document.querySelectorAll('.message-option-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const messageText = this.closest('.message-group').querySelector('.message-text').textContent;
                    navigator.clipboard.writeText(messageText);
                    this.title = 'Copied!';
                    setTimeout(() => { this.title = 'Copy'; }, 2000);
                });
            });
        });
    </script>
</body>
</html>